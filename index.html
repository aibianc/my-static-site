<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">
    <style>
        .heart-container {
            position: relative;
            height: 80vh;
            perspective: 1000px;
        }
        .heart-core {
            position: absolute;
            width: 300px;
            height: 300px;
            border-radius: 50%;
            background: linear-gradient(45deg, #ff3860, #ff69b4);
            transform-style: preserve-3d;
            transition: transform 0.3s ease-out;
            box-shadow: 0 0 50px rgba(255,56,96,0.3);
            cursor: pointer;
        }
        .heart-core::before {
            content: '';
            position: absolute;
            top: -20%;
            left: -20%;
            width: 140%;
            height: 140%;
            border-radius: 50%;
            background: inherit;
            filter: blur(30px);
            opacity: 0.4;
            z-index: -1;
        }
        .halo {
            position: absolute;
            width: 150%;
            height: 150%;
            top: -25%;
            left: -25%;
            mix-blend-mode: screen;
        }
        .memory-particle {
            position: absolute;
            transition: all 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }
        .memory-particle i {
            color: inherit;
            font-size: 1.2em;
        }
        .floating-msg {
            position: absolute;
            transition: all 1.2s ease-out;
            transform: translateY(-100%);
            opacity: 0;
        }
        .love-msg-enter-active {
            opacity: 1;
            transform: translateY(-180%);
        }
        @keyframes halo-pulse {
            0% { transform: scale(0.8); opacity: 0.8; }
            50% { transform: scale(1.2); opacity: 0.4; }
            100% { transform: scale(0.8); opacity: 0.8; }
        }
        @keyframes heartbeat {
            0% { transform: scale(1); }
            15% { transform: scale(1.3); }
            30% { transform: scale(0.95); }
            45% { transform: scale(1.15); }
            60% { transform: scale(0.98); }
            75% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
    </style>
    <title>Heartbeat Interaction</title>
</head>
<body>
<div id="app" class="heart-container">
    <!-- 核心爱心组件 -->
    <div class="heart-core" id="heart-core">
        <!-- 动态光晕层 -->
        <div class="halo" id="halo"></div>
        
        <!-- 记忆粒子系统 -->
        <div id="particles"></div>
        
        <!-- 情感交互层 -->
        <div class="emotion-layer" id="emotion-layer">
            <!-- 爱情消息将被动态插入到这里 -->
        </div>
    </div>
    
    <!-- 辅助交互组件 -->
    <el-slider id="energy-slider" v-model="energyLevel" :max="100" class="energy-control"></el-slider>
</div>

<script src="https://cdn.jsdelivr.net/npm/vue@2"></script>
<script src="https://unpkg.com/element-ui/lib/index.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', () => {
        const heartCore = document.getElementById('heart-core');
        const halo = document.getElementById('halo');
        const particlesContainer = document.getElementById('particles');
        const emotionLayer = document.getElementById('emotion-layer');
        const energySlider = document.getElementById('energy-slider');

        let isVisible = true;
        let energyLevel = 80;
        let particles = [];
        let loveMessages = [];
        let coreStyles = {
            '--pulse-rate': '1.2s',
            '--glow-color': '#ff3860'
        };

        function updateCoreStyles() {
            for (let key in coreStyles) {
                heartCore.style.setProperty(key, coreStyles[key]);
            }
        }

        function updateHaloAnimation() {
            halo.style.animation = `halo-pulse ${energyLevel / 100 + 0.5}s infinite`;
            halo.style.background = `radial-gradient(circle, 
                ${coreStyles['--glow-color']} 0%, 
                transparent 70%)`;
        }

        function particleStyle(particle) {
            return {
                transform: `translate(${particle.x}px, ${particle.y}px) scale(${particle.size})`,
                opacity: particle.opacity,
                filter: `hue-rotate(${particle.hue}deg)`
            };
        }

        function handleMouseMove(e) {
            generateParticles(e.clientX, e.clientY);
            const x = (e.clientY / window.innerHeight).toFixed(2);
            const y = (e.clientX / window.innerWidth).toFixed(2);
            heartCore.style.transform = `rotate3d(${x}, ${y}, 0.1, 8deg)`;
        }

        function triggerHeartbeat() {
            loveMessages.push({
                id: Date.now(),
                text: generateLoveSentence()
            });
            heartCore.style.animation = `heartbeat ${0.6 + energyLevel / 200}s ease-out`;
            setTimeout(() => {
                heartCore.style.animation = '';
            }, 600);
            renderLoveMessages();
        }

        function generateLoveSentence() {
            const verbs = ['照亮', '温暖', '守护', '拥抱'];
            const nouns = ['星辰', '时光', '未来', '宇宙'];
            return `愿用${verbs[Math.floor(Math.random() * verbs.length)]} 
                    你的${nouns[Math.floor(Math.random() * nouns.length)]}`;
        }

        function generateParticles(x, y) {
            if (particles.length < 50) {
                particles.push({
                    x: x - 10 + Math.random() * 20,
                    y: y - 10 + Math.random() * 20,
                    size: 0.3 + Math.random() * 0.7,
                    opacity: 0.8,
                    hue: Math.random() * 360
                });
            }
            particles = particles.filter(p => p.opacity > 0.1).map(p => ({
                ...p,
                opacity: p.opacity - 0.02,
                y: p.y - 1
            }));
            renderParticles();
        }

        function renderParticles() {
            particlesContainer.innerHTML = '';
            particles.forEach((particle, index) => {
                const particleElement = document.createElement('div');
                particleElement.className = 'memory-particle';
                particleElement.style.cssText = Object.entries(particleStyle(particle))
                    .map(([key, value]) => `${key}: ${value};`)
                    .join(' ');
                particleElement.innerHTML = '<i class="el-icon-star-on"></i>';
                particlesContainer.appendChild(particleElement);
            });
        }

        function renderLoveMessages() {
            emotionLayer.innerHTML = '';
            loveMessages.forEach(msg => {
                const tagElement = document.createElement('el-tag');
                tagElement.className = 'floating-msg';
                tagElement.setAttribute('type', 'danger');
                tagElement.textContent = msg.text;
                emotionLayer.appendChild(tagElement);
            });
        }

        function adjustEnergy() {
            energyLevel = parseInt(energySlider.value);
            updateHaloAnimation();
        }

        heartCore.addEventListener('mousemove', handleMouseMove);
        heartCore.addEventListener('click', triggerHeartbeat);
        energySlider.addEventListener('input', adjustEnergy);

        updateCoreStyles();
        updateHaloAnimation();
        renderLoveMessages();
    });
</script>
</body>
</html>
